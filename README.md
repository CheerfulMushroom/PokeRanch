Реализация паттерна state. Основной интерфейс приложения.
